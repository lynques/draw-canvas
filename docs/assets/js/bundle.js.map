{"version":3,"sources":["webpack:///webpack/bootstrap 4a8e9e85511b31e4a003","webpack:///./src/index.ts","webpack:///./src/draw-canvas/draw-canvas.component.ts","webpack:///./src/draw-canvas/draw-canvas.service.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","customElements","define","__WEBPACK_IMPORTED_MODULE_0__draw_canvas_draw_canvas_component__","__webpack_exports__","HTMLElement","[object Object]","super","this","_strokeColor","_strokeWeight","canvas","ctx","drawing","strokeColor","val","setAttribute","strokeWeight","observedAttributes","oldVal","newVal","weight","parseInt","style","document","createElement","shadow","attachShadow","mode","textContent","appendChild","init","getContext","addEventListener","handleMouseDown","bind","handleMouseMove","handleMouseUp","width","clientWidth","height","clientHeight","service","__WEBPACK_IMPORTED_MODULE_0__draw_canvas_service__","e","posX","offsetX","posY","offsetY","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","fillStyle","fillRect","size","_component","_canvas","_ctx","prevWidth","prevHeight","component","requestAnimationFrame","resize","imageData","getImageData","putImageData"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4a8e9e85511b31e4a003","import { DrawCanvas } from './draw-canvas/draw-canvas.component';\n\ncustomElements.define('draw-canvas', DrawCanvas);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { DrawCanvasService } from './draw-canvas.service';\n\nexport class DrawCanvas extends HTMLElement {\n\n  private _strokeWeight: number;\n  private _strokeColor: string;\n  private canvas: HTMLCanvasElement;\n  private ctx: any;\n  private drawing: boolean;\n  private service: DrawCanvasService;\n\n  constructor() {\n    super();\n    this._strokeColor = '#000';\n    this._strokeWeight = 1;\n    this.canvas = null;\n    this.ctx = null;\n    this.drawing = false;\n  }\n\n  /* set attribute properties */\n  set strokeColor(val: string) {\n    this.setAttribute('stroke-color', val);\n  }\n\n  set strokeWeight(val: string) {\n    this.setAttribute('stroke-weight', val);\n  }\n\n  static get observedAttributes() {\n    return ['stroke-color', 'stroke-weight'];\n  }\n\n  /* custom element lifecycle methods */\n  public attributeChangedCallback(name: string, oldVal: string, newVal: string): void {\n    switch (name) {\n      case 'stroke-color':\n        this._strokeColor = newVal;\n        break;\n      case 'stroke-weight':\n        const weight = parseInt(newVal, 10) || 1;\n        this._strokeWeight = weight < 1 ? 1 : weight;\n        break;\n    }\n  }\n\n  public connectedCallback(): void {\n    const style = document.createElement('style');\n    const shadow = this.attachShadow({ mode: 'open' });\n    style.textContent = 'draw-canvas { display: block; overflow: hidden; }';\n    this.appendChild(style);\n    this.canvas = document.createElement('canvas');\n    shadow.appendChild(this.canvas);\n    this.init();\n  }\n\n  /**\n   * Initialize canvas and 2d context\n   */\n  public init(): void {\n    this.ctx = this.canvas.getContext('2d');\n    this.canvas.addEventListener('mousedown', this.handleMouseDown.bind(this));\n    this.canvas.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    this.canvas.addEventListener('mouseout', this.handleMouseUp.bind(this));\n    this.canvas.addEventListener('mouseup', this.handleMouseUp.bind(this));\n    this.canvas.width = this.clientWidth;\n    this.canvas.height = this.clientHeight;\n    this.service = new DrawCanvasService(this, this.canvas, this.ctx);\n  }\n\n  /**\n   * Handle mousedown events on canvas element\n   * @param {MouseEvent} e the mouse event object\n   */\n  public handleMouseDown(e: MouseEvent): void {\n    const posX = e.offsetX;\n    const posY = e.offsetY;\n    this.drawing = true;\n    this.ctx.strokeStyle = this._strokeColor;\n    this.ctx.lineWidth = this._strokeWeight;\n    this.ctx.beginPath();\n    this.ctx.moveTo(posX, posY);\n  }\n\n  /**\n   * Handle mousemove events on canvas element - does the drawing part\n   * @param {MouseEvent} e the mouse event object\n   */\n  public handleMouseMove(e: MouseEvent): void {\n    if (this.drawing) {\n      const posX = e.offsetX;\n      const posY = e.offsetY;\n      this.ctx.lineTo(posX, posY);\n      this.ctx.stroke();\n    }\n  }\n\n  /**\n   * Handle mouseup events on canvas element - stop drawing\n   */\n  public handleMouseUp(): void {\n    this.drawing = false;\n  }\n\n  /**\n   * Wipe the canvas\n   */\n  public clear(): void {\n    this.ctx.fillStyle = '#fff';\n    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n    if (this.service) {\n      this.service.size();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw-canvas/draw-canvas.component.ts","import { DrawCanvas } from './draw-canvas.component';\n\nexport class DrawCanvasService {\n\n  private canvas: HTMLCanvasElement;\n  private ctx: any;\n  private prevWidth: number = 0;\n  private prevHeight: number = 0;\n  private component: DrawCanvas;\n\n  constructor(_component: DrawCanvas, _canvas: HTMLCanvasElement, _ctx: any) {\n    this.component = _component;\n    this.canvas = _canvas;\n    this.ctx = _ctx;\n    requestAnimationFrame(this.resize.bind(this));\n  }\n\n  public size(): void {\n    this.prevWidth = this.component.clientWidth;\n    this.prevHeight = this.component.clientHeight;\n    this.canvas.width = this.prevWidth;\n    this.canvas.height = this.prevHeight;\n  }\n\n  private resize(): void {\n    if (this.prevWidth - this.component.clientWidth < 0 || this.prevHeight - this.component.clientHeight < 0) {\n      let imageData: any;\n      if (this.prevWidth > 0) {\n        imageData = this.ctx.getImageData(0, 0, this.prevWidth, this.prevHeight);\n      }\n      this.size();\n      if (imageData) {\n        this.ctx.putImageData(imageData, 0, 0);\n      }\n    }\n    requestAnimationFrame(this.resize.bind(this));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/draw-canvas/draw-canvas.service.ts"],"sourceRoot":""}